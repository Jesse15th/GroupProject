<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manager Dashboard - Demo</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<div class="container mt-5">
    <!-- Logo at the top left -->
    <div class="row">
        <div class="col-12">
            <img src="IMG_4041.jpg" class="img-fluid" style="max-width: 200px;">
        </div>
    </div>
    
    <h2 class="text-center mt-3">Manager Dashboard</h2>

    <!-- Donut chart for task statuses -->
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <canvas id="taskStatusChart"></canvas>
        </div>
    </div>

    <!-- Button to open task creation modal -->
    <button type="button" class="btn btn-primary mt-4" data-toggle="modal" data-target="#createTaskModal">Create New Task</button>

    <!-- Table to display tasks -->
    <table class="table table-bordered table-hover mt-4">
        <thead class="thead-dark">
            <tr>
                <th>Employee</th>
                <th>Task</th>
                <th>Status</th>
                <th>Priority</th>
            </tr>
        </thead>
        <tbody id="taskTableBody">
            <!-- Dummy task rows -->
            <tr>
                <td>alice@makeitall.com</td>
                <td>Set up development environment</td>
                <td>Completed</td>
                <td>High</td>
            </tr>
            <tr>
                <td>bob@makeitall.com</td>
                <td>Design user interface mockups</td>
                <td>In-progress</td>
                <td>Medium</td>
            </tr>
            <tr>
                <td>charlie@makeitall.com</td>
                <td>Prepare project documentation</td>
                <td>Pending</td>
                <td>Low</td>
            </tr>
            <tr>
                <td>diana@makeitall.com</td>
                <td>Test new feature implementation</td>
                <td>In-progress</td>
                <td>High</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Task Creation Modal -->
<div class="modal fade" id="createTaskModal" tabindex="-1" role="dialog" aria-labelledby="createTaskModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createTaskModalLabel">Create New Task</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="createTaskForm">
                    <div class="form-group">
                        <label for="taskTitle">Task Title</label>
                        <input type="text" class="form-control" id="taskTitle" name="title" placeholder="Enter task title" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">Description</label>
                        <textarea class="form-control" id="taskDescription" name="description" rows="3" placeholder="Enter task description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="assignedTo">Assign to (Employee Email)</label>
                        <input type="email" class="form-control" id="assignedTo" name="assigned_to" placeholder="Enter employee email" required>
                    </div>
                    <div class="form-group">
                        <label for="taskPriority">Priority</label>
                        <select class="form-control" id="taskPriority" name="priority">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="addDummyTask()">Create Task</button>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
// Function to add dummy task to the table (for demo purposes)
function addDummyTask() {
    const taskTitle = document.getElementById('taskTitle').value;
    const taskDescription = document.getElementById('taskDescription').value;
    const assignedTo = document.getElementById('assignedTo').value;
    const taskPriority = document.getElementById('taskPriority').value;

    if (taskTitle && taskDescription && assignedTo) {
        const taskTableBody = document.getElementById('taskTableBody');
        const newRow = `
            <tr>
                <td>${assignedTo}</td>
                <td>${taskTitle}</td>
                <td>Pending</td>
                <td>${taskPriority.charAt(0).toUpperCase() + taskPriority.slice(1)}</td>
            </tr>
        `;
        taskTableBody.insertAdjacentHTML('beforeend', newRow);

        // Clear form fields and hide modal
        document.getElementById('createTaskForm').reset();
        $('#createTaskModal').modal('hide');
    } else {
        alert('Please fill out all fields.');
    }
}

// Donut chart configuration using Chart.js
const ctx = document.getElementById('taskStatusChart').getContext('2d');
const taskStatusChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['In-progress', 'Completed', 'Pending'],
        datasets: [{
            data: [2, 1, 1],  // Example data: 2 In-progress, 1 Completed, 1 Pending
            backgroundColor: ['#007bff', '#28a745', '#ffc107'],
            borderColor: ['#007bff', '#28a745', '#ffc107'],
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        legend: {
            position: 'bottom',
        }
    }
});
</script>

</body>
</html>
